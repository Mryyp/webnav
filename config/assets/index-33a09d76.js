import{z as Y,L as c,Y as d,B as h,d as j,i as D,R as v,D as R,$ as J,m as I,A as X,b as S,ae as x,af as y,W as z,al as A,S as k,O as Z,am as p,Q as N,an as ee,E as te}from"./index-5ee6b2fa.js";import{H as O,L as ae}from"./_plugin-vue_export-helper-a2c4d23b.js";import{c as ne}from"./index-5786f0c1.js";const[le,P]=Y("stepper"),ie=200,T=(t,u)=>String(t)===String(u),ue={min:c(1),max:c(1/0),name:c(""),step:c(1),theme:String,integer:Boolean,disabled:Boolean,showPlus:d,showMinus:d,showInput:d,longPress:d,autoFixed:d,allowEmpty:Boolean,modelValue:h,inputWidth:h,buttonSize:h,placeholder:String,disablePlus:Boolean,disableMinus:Boolean,disableInput:Boolean,beforeChange:Function,defaultValue:c(1),decimalLength:h};var se=j({name:le,props:ue,emits:["plus","blur","minus","focus","change","overlimit","update:modelValue"],setup(t,{emit:u}){const o=(e,a=!0)=>{const{min:l,max:b,allowEmpty:i,decimalLength:g}=t;return i&&e===""||(e=A(String(e),!t.integer),e=e===""?0:+e,e=Number.isNaN(e)?+l:e,e=a?Math.max(Math.min(+b,e),+l):e,k(g)&&(e=e.toFixed(+g))),e},W=()=>{var e;const a=(e=t.modelValue)!=null?e:t.defaultValue,l=o(a);return T(l,t.modelValue)||u("update:modelValue",l),l};let s;const E=D(),n=D(W()),m=v(()=>t.disabled||t.disableMinus||+n.value<=+t.min),r=v(()=>t.disabled||t.disablePlus||+n.value>=+t.max),$=v(()=>({width:R(t.inputWidth),height:R(t.buttonSize)})),L=v(()=>J(t.buttonSize)),G=()=>{const e=o(n.value);T(e,n.value)||(n.value=e)},B=e=>{t.beforeChange?ne(t.beforeChange,{args:[e],done(){n.value=e}}):n.value=e},w=()=>{if(s==="plus"&&r.value||s==="minus"&&m.value){u("overlimit",s);return}const e=s==="minus"?-t.step:+t.step,a=o(ee(+n.value,e));B(a),u(s)},H=e=>{const a=e.target,{value:l}=a,{decimalLength:b}=t;let i=A(String(l),!t.integer);if(k(b)&&i.includes(".")){const F=i.split(".");i=`${F[0]}.${F[1].slice(0,+b)}`}t.beforeChange?a.value=String(n.value):T(l,i)||(a.value=i);const g=i===String(+i);B(g?+i:i)},q=e=>{var a;t.disableInput?(a=E.value)==null||a.blur():u("focus",e)},K=e=>{const a=e.target,l=o(a.value,t.autoFixed);a.value=String(l),n.value=l,Z(()=>{u("blur",e),p()})};let V,f;const C=()=>{f=setTimeout(()=>{w(),C()},ie)},Q=()=>{t.longPress&&(V=!1,clearTimeout(f),f=setTimeout(()=>{V=!0,w(),C()},ae))},M=e=>{t.longPress&&(clearTimeout(f),V&&N(e))},U=e=>{t.disableInput&&N(e)},_=e=>({onClick:a=>{N(a),s=e,w()},onTouchstartPassive:()=>{s=e,Q()},onTouchend:M,onTouchcancel:M});return I(()=>[t.max,t.min,t.integer,t.decimalLength],G),I(()=>t.modelValue,e=>{T(e,n.value)||(n.value=o(e))}),I(n,e=>{u("update:modelValue",e),u("change",e,{name:t.name})}),X(()=>t.modelValue),()=>S("div",{role:"group",class:P([t.theme])},[x(S("button",z({type:"button",style:L.value,class:[P("minus",{disabled:m.value}),{[O]:!m.value}],"aria-disabled":m.value||void 0},_("minus")),null),[[y,t.showMinus]]),x(S("input",{ref:E,type:t.integer?"tel":"text",role:"spinbutton",class:P("input"),value:n.value,style:$.value,disabled:t.disabled,readonly:t.disableInput,inputmode:t.integer?"numeric":"decimal",placeholder:t.placeholder,"aria-valuemax":t.max,"aria-valuemin":t.min,"aria-valuenow":n.value,onBlur:K,onInput:H,onFocus:q,onMousedown:U},null),[[y,t.showInput]]),x(S("button",z({type:"button",style:L.value,class:[P("plus",{disabled:r.value}),{[O]:!r.value}],"aria-disabled":r.value||void 0},_("plus")),null),[[y,t.showPlus]])])}});const me=te(se);export{me as S};
