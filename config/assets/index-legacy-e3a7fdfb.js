System.register(["./index-legacy-a99c9020.js","./index-legacy-80e98bda.js","./use-id-legacy-6fdeb452.js","./_plugin-vue_export-helper-legacy-81237f8a.js"],(function(e,t){"use strict";var l,o,n,a,i,s,u,c,r,d,v,p,m,f,h,g,b,x,y,H,w,O,k,I,T,B,S,N,C,D,V,M,j,$,_,P,E,L,z;return{setters:[e=>{l=e.z,o=e.S,n=e.a2,a=e.V,i=e.d,s=e.B,u=e.a3,c=e.a7,r=e.i,d=e.R,v=e.a4,p=e.ao,m=e.N,f=e.b,h=e.Q,g=e.L,b=e.Y,x=e.X,y=e.a1,H=e.ap,w=e.m,O=e.aq,k=e.O,I=e.a5,T=e.W,B=e.E,S=e.x,N=e.c,C=e.H,D=e.ah,V=e.f,M=e.ai,j=e.o},e=>{$=e.u,_=e.a},e=>{P=e.L},e=>{E=e.H,L=e.B,z=e._}],execute:function(){const[t,A,F]=l("picker"),Y=e=>e.find((e=>!e.disabled))||e[0];function q(e,t){for(let l=t=a(t,0,e.length);l<e.length;l++)if(!e[l].disabled)return l;for(let l=t-1;l>=0;l--)if(!e[l].disabled)return l;return 0}const Q=(e,t,l)=>void 0!==t&&!!e.find((e=>e[l.value]===t));function R(e,t,l){const o=e.findIndex((e=>e[l.value]===t));return e[q(e,o)]}const[W,X]=l("picker-column"),G=Symbol(W);var J=i({name:W,props:{value:s,fields:u(Object),options:c(),readonly:Boolean,allowHtml:Boolean,optionHeight:u(Number),swipeDuration:u(s),visibleOptionNum:u(s)},emits:["change","clickOption","scrollInto"],setup(e,{emit:t,slots:l}){let o,n,i,s,u;const c=r(),g=r(),b=r(0),x=r(0),y=$(),H=()=>e.options.length,w=()=>e.optionHeight*(+e.visibleOptionNum-1)/2,O=l=>{let n=q(e.options,l);const a=-n*e.optionHeight,i=()=>{n>H()-1&&(n=q(e.options,l));const o=e.options[n][e.fields.value];o!==e.value&&t("change",o)};o&&a!==b.value?u=i:i(),b.value=a},k=()=>e.readonly||!e.options.length,I=t=>a(Math.round(-t/e.optionHeight),0,H()-1),T=d((()=>I(b.value))),B=()=>{o=!1,x.value=0,u&&(u(),u=null)},S=e=>{if(!k()){if(y.start(e),o){const e=function(e){const{transform:t}=window.getComputedStyle(e),l=t.slice(7,t.length-1).split(", ")[5];return Number(l)}(g.value);b.value=Math.min(0,e-w())}x.value=0,n=b.value,i=Date.now(),s=n,u=null}},N=()=>{if(k())return;const t=b.value-s,l=Date.now()-i;if(l<300&&Math.abs(t)>15)return void((t,l)=>{const o=Math.abs(t/l);t=b.value+o/.003*(t<0?-1:1);const n=I(t);x.value=+e.swipeDuration,O(n)})(t,l);const n=I(b.value);x.value=200,O(n),setTimeout((()=>{o=!1}),0)},C=()=>{const n={height:`${e.optionHeight}px`};return e.options.map(((a,i)=>{const s=a[e.fields.text],{disabled:c}=a,r=a[e.fields.value],d={role:"button",style:n,tabindex:c?-1:0,class:[X("item",{disabled:c,selected:r===e.value}),a.className],onClick:()=>(l=>{o||k()||(u=null,x.value=200,O(l),t("clickOption",e.options[l]))})(i)},v={class:"van-ellipsis",[e.allowHtml?"innerHTML":"textContent"]:s};return f("li",d,[l.option?l.option(a,i):f("div",v,null)])}))};return v(G),_({stopMomentum:B}),p((()=>{const t=o?Math.floor(-b.value/e.optionHeight):e.options.findIndex((t=>t[e.fields.value]===e.value)),l=q(e.options,t),n=-l*e.optionHeight;o&&l<t&&B(),b.value=n})),m("touchmove",(l=>{if(k())return;y.move(l),y.isVertical()&&(o=!0,h(l,!0));const u=a(n+y.deltaY.value,-H()*e.optionHeight,e.optionHeight),c=I(u);c!==T.value&&t("scrollInto",e.options[c]),b.value=u;const r=Date.now();r-i>300&&(i=r,s=u)}),{target:c}),()=>f("div",{ref:c,class:X(),onTouchstartPassive:S,onTouchend:N,onTouchcancel:N},[f("ul",{ref:g,style:{transform:`translate3d(0, ${b.value+w()}px, 0)`,transitionDuration:`${x.value}ms`,transitionProperty:x.value?"all":"none"},class:X("wrapper"),onTransitionend:B},[C()])])}});const[K]=l("picker-toolbar"),U={title:String,cancelButtonText:String,confirmButtonText:String},Z=["cancel","confirm","title","toolbar"],ee=Object.keys(U);var te=i({name:K,props:U,emits:["confirm","cancel"],setup(e,{emit:t,slots:l}){const o=()=>t("cancel"),n=()=>t("confirm"),a=()=>{const t=e.cancelButtonText||F("cancel");return f("button",{type:"button",class:[A("cancel"),E],onClick:o},[l.cancel?l.cancel():t])},i=()=>{const t=e.confirmButtonText||F("confirm");return f("button",{type:"button",class:[A("confirm"),E],onClick:n},[l.confirm?l.confirm():t])};return()=>f("div",{class:A("toolbar")},[l.toolbar?l.toolbar():[a(),l.title?l.title():e.title?f("div",{class:[A("title"),"van-ellipsis"]},[e.title]):void 0,i()]])}});const[le,oe]=l("picker-group"),ne=Symbol(le);n({tabs:c(),activeTab:g(0),nextStepText:String},U);const ae=n({loading:Boolean,readonly:Boolean,allowHtml:Boolean,optionHeight:g(44),showToolbar:b,swipeDuration:g(1e3),visibleOptionNum:g(6)},U),ie=n({},ae,{columns:c(),modelValue:c(),toolbarPosition:x("top"),columnsFieldNames:Object});var se=i({name:t,props:ie,emits:["confirm","cancel","change","scrollInto","clickOption","update:modelValue"],setup(e,{emit:t,slots:l}){const a=r(),i=r(e.modelValue.slice(0)),{parent:s}=v(ne),{children:u,linkChildren:c}=y(G);c();const p=d((()=>function(e){return n({text:"text",value:"value",children:"children"},e)}(e.columnsFieldNames))),g=d((()=>H(e.optionHeight))),b=d((()=>function(e,t){const l=e[0];if(l){if(Array.isArray(l))return"multiple";if(t.children in l)return"cascade"}return"default"}(e.columns,p.value))),x=d((()=>{const{columns:t}=e;switch(b.value){case"multiple":return t;case"cascade":return function(e,t,l){const n=[];let a={[t.children]:e},i=0;for(;a&&a[t.children];){const e=a[t.children],s=l.value[i];a=o(s)?R(e,s,t):void 0,!a&&e.length&&(a=R(e,Y(e)[t.value],t)),i++,n.push(e)}return n}(t,p.value,i);default:return[t]}})),B=d((()=>x.value.some((e=>e.length)))),S=d((()=>x.value.map(((e,t)=>R(e,i.value[t],p.value))))),N=d((()=>x.value.map(((e,t)=>e.findIndex((e=>e[p.value.value]===i.value[t])))))),C=(e,t)=>{if(i.value[e]!==t){const l=i.value.slice(0);l[e]=t,i.value=l}},D=()=>({selectedValues:i.value.slice(0),selectedOptions:S.value,selectedIndexes:N.value}),V=()=>{u.forEach((e=>e.stopMomentum()));const e=D();return k((()=>{t("confirm",e)})),e},M=()=>t("cancel",D()),j=()=>x.value.map(((o,a)=>f(J,{value:i.value[a],fields:p.value,options:o,readonly:e.readonly,allowHtml:e.allowHtml,optionHeight:g.value,swipeDuration:e.swipeDuration,visibleOptionNum:e.visibleOptionNum,onChange:e=>((e,l)=>{C(l,e),"cascade"===b.value&&i.value.forEach(((e,t)=>{const l=x.value[t];Q(l,e,p.value)||C(t,l.length?l[0][p.value.value]:void 0)})),k((()=>{t("change",n({columnIndex:l},D()))}))})(e,a),onClickOption:e=>((e,l)=>{const o={columnIndex:l,currentOption:e};t("clickOption",n(D(),o)),t("scrollInto",o)})(e,a),onScrollInto:e=>{t("scrollInto",{currentOption:e,columnIndex:a})}},{option:l.option}))),$=e=>{if(B.value){const t={height:`${g.value}px`},l={backgroundSize:`100% ${(e-g.value)/2}px`};return[f("div",{class:A("mask"),style:l},null),f("div",{class:[L,A("frame")],style:t},null)]}},E=()=>{const t=g.value*+e.visibleOptionNum,l={height:`${t}px`};return f("div",{ref:a,class:A("columns"),style:l},[j(),$(t)])},z=()=>{if(e.showToolbar&&!s)return f(te,T(I(e,ee),{onConfirm:V,onCancel:M}),I(l,Z))};let F;return w(x,(e=>{e.forEach(((e,t)=>{e.length&&!Q(e,i.value[t],p.value)&&C(t,Y(e)[p.value.value])}))}),{immediate:!0}),w((()=>e.modelValue),(e=>{O(e,i.value)||O(e,F)||(i.value=e.slice(0),F=e.slice(0))}),{deep:!0}),w(i,(l=>{O(l,e.modelValue)||(F=l.slice(0),t("update:modelValue",F))}),{immediate:!0}),m("touchmove",h,{target:a}),_({confirm:V,getSelectedOptions:()=>S.value}),()=>{var t,o;return f("div",{class:A()},["top"===e.toolbarPosition?z():null,e.loading?f(P,{class:A("loading")},null):null,null==(t=l["columns-top"])?void 0:t.call(l),E(),null==(o=l["columns-bottom"])?void 0:o.call(l),"bottom"===e.toolbarPosition?z():null])}}});e("P",B(se));const ue=i({__name:"index",props:{title:{type:Boolean,default:!1},border:{type:Boolean,default:!0},padding:{default:""}},setup(e){const t=e,{title:l,padding:o}=S(t);return(e,t)=>(j(),N("div",{class:D({"label-title":V(l),"label-box":e.border}),style:M({padding:V(o)})},[C(e.$slots,"default",{},void 0,!0)],6))}});e("L",z(ue,[["__scopeId","data-v-4c4333b2"]]))}}}));
