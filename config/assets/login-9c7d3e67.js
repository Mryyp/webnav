import{i as h}from"./utils-64f0fd18.js";import{i as v}from"./index-2a44163e.js";import{d as g,x as y,i as d,o as n,c as i,f as u,y as p,t as S}from"./index-5ee6b2fa.js";import{s as c,a as o}from"./request-0c3efa69.js";import{_ as b}from"./_plugin-vue_export-helper-a2c4d23b.js";const w={class:"box"},P={key:1,class:"second"},x=g({__name:"shortMessage",props:{mobile:{},type:{}},setup(l){const e=l,{mobile:a,type:m}=y(e),r=d(!0),t=d(0),_=()=>{t.value=60;const s=setInterval(()=>{t.value-=1,t.value<=0&&(clearInterval(s),r.value=!0)},1e3)},f=async()=>{if(!a.value){c("请输入手机号");return}if(!h(a.value)){c("手机号格式错误");return}try{(await v.sendCode({mobile:a.value,type:m.value})).code===0&&(r.value=!1,_())}catch(s){c("请求短信验证码失败，请重试")}};return(s,k)=>(n(),i("div",w,[u(r)?(n(),i("span",{key:0,class:"code",onClick:f},"获取验证码")):p("",!0),u(t)>0?(n(),i("span",P,S(u(t))+" 秒",1)):p("",!0)]))}});const I=b(x,[["__scopeId","data-v-fb10e520"]]);class C{login(e){return o.request({url:"/auth/login",method:"POST",data:e})}login2(e){return o.request({url:"/auth/login2",method:"POST",data:e})}resetPassword(e){return o.request({url:"/auth/resetPassword",method:"POST",data:e})}regist(e){return o.request({url:"/auth/regist",method:"POST",data:e})}}const B=new C;export{I as S,B as l};
