System.register(["./index-legacy-a99c9020.js","./index-legacy-72b87ffe.js","./use-id-legacy-6fdeb452.js","./index-legacy-80e98bda.js","./_plugin-vue_export-helper-legacy-81237f8a.js"],(function(e,t){"use strict";var a,l,r,n,i,o,s,u,c,d,g,f,p,m,v,h,y,b,x,k,S,C,w,I,M,V,B,A,E,z,j,T,L,P,W,$,F,H;return{setters:[e=>{a=e.aF,l=e.aG,r=e.aC,n=e.ag,i=e.ac,o=e.z,s=e.B,u=e.X,c=e.L,d=e.a2,g=e.C,f=e.d,p=e.r,m=e.i,v=e.a4,h=e.R,y=e.D,b=e.aH,x=e.aI,k=e.m,S=e.O,C=e.n,w=e.N,I=e.b,M=e.S,V=e.ab,B=e.al,A=e.Q,E=e.W,z=e.g,j=e.am,T=e.E},e=>{L=e.c,P=e.C},e=>{W=e.u},e=>{$=e.a},e=>{F=e.F,H=e.I}],execute:function(){function t(e){return Array.isArray(e)?!e.length:0!==e&&!e}function R(e,t){const{message:a}=t;return i(a)?a(e,t):a||""}function q({target:e}){e.composing=!0}function D({target:e}){e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}function O(e){return[...e].length}function _(e,t){return[...e].slice(0,t).join("")}const[G,K]=o("field"),N={id:String,name:String,leftIcon:String,rightIcon:String,autofocus:Boolean,clearable:Boolean,maxlength:s,formatter:Function,clearIcon:u("clear"),modelValue:c(""),inputAlign:String,placeholder:String,autocomplete:String,autocapitalize:String,autocorrect:String,errorMessage:String,enterkeyhint:String,spellcheck:{type:Boolean,default:null},clearTrigger:u("focus"),formatTrigger:u("onChange"),error:{type:Boolean,default:null},disabled:{type:Boolean,default:null},readonly:{type:Boolean,default:null}},Q=d({},L,N,{rows:s,type:u("text"),rules:Array,autosize:[Boolean,Object],labelWidth:s,labelClass:g,labelAlign:String,showWordLimit:Boolean,errorMessageAlign:String,colon:{type:Boolean,default:null}});var X=f({name:G,props:Q,emits:["blur","focus","clear","keypress","clickInput","endValidate","startValidate","clickLeftIcon","clickRightIcon","update:modelValue"],setup(e,{emit:i,slots:o}){const s=W(),u=p({status:"unvalidated",focused:!1,validateMessage:""}),c=m(),d=m(),g=m(),{parent:f}=v(F),T=()=>{var t;return String(null!=(t=e.modelValue)?t:"")},L=t=>M(e[t])?e[t]:f&&M(f.props[t])?f.props[t]:void 0,G=h((()=>{const t=L("readonly");if(e.clearable&&!t){const t=""!==T(),a="always"===e.clearTrigger||"focus"===e.clearTrigger&&u.focused;return t&&a}return!1})),N=h((()=>g.value&&o.input?g.value():e.modelValue)),Q=e=>e.reduce(((e,a)=>e.then((()=>{if("failed"===u.status)return;let{value:e}=N;if(a.formatter&&(e=a.formatter(e,a)),!function(e,a){if(t(e)){if(a.required)return!1;if(!1===a.validateEmpty)return!0}return!(a.pattern&&!a.pattern.test(String(e)))}(e,a))return u.status="failed",void(u.validateMessage=R(e,a));if(a.validator){if(t(e)&&!1===a.validateEmpty)return;return function(e,t){return new Promise((a=>{const l=t.validator(e,t);n(l)?l.then(a):a(l)}))}(e,a).then((t=>{t&&"string"==typeof t?(u.status="failed",u.validateMessage=t):!1===t&&(u.status="failed",u.validateMessage=R(e,a))}))}}))),Promise.resolve()),X=()=>{u.status="unvalidated",u.validateMessage=""},J=()=>i("endValidate",{status:u.status,message:u.validateMessage}),U=(t=e.rules)=>new Promise((a=>{X(),t?(i("startValidate"),Q(t).then((()=>{"failed"===u.status?(a({name:e.name,message:u.validateMessage}),J()):(u.status="passed",a(),J())}))):a()})),Y=t=>{if(f&&e.rules){const{validateTrigger:a}=f.props,l=V(a).includes(t),r=e.rules.filter((e=>e.trigger?V(e.trigger).includes(t):l));r.length&&U(r)}},Z=(t,a="onChange")=>{const l=t;t=(t=>{var a;const{maxlength:l}=e;if(M(l)&&O(t)>+l){const e=T();if(e&&O(e)===+l)return e;const r=null==(a=c.value)?void 0:a.selectionEnd;if(u.focused&&r){const e=[...t],a=e.length-+l;return e.splice(r-a,a),e.join("")}return _(t,+l)}return t})(t);const r=O(l)-O(t);if("number"===e.type||"digit"===e.type){const a="number"===e.type;t=B(t,a,a)}let n=0;if(e.formatter&&a===e.formatTrigger){const{formatter:a,maxlength:r}=e;if(t=a(t),M(r)&&O(t)>+r&&(t=_(t,+r)),c.value&&u.focused){const{selectionEnd:e}=c.value,t=_(l,e);n=O(a(t))-O(t)}}if(c.value&&c.value.value!==t)if(u.focused){let{selectionStart:e,selectionEnd:a}=c.value;if(c.value.value=t,M(e)&&M(a)){const l=O(t);r?(e-=r,a-=r):n&&(e+=n,a+=n),c.value.setSelectionRange(Math.min(e,l),Math.min(a,l))}}else c.value.value=t;t!==e.modelValue&&i("update:modelValue",t)},ee=e=>{e.target.composing||Z(e.target.value)},te=()=>{var e;return null==(e=c.value)?void 0:e.blur()},ae=()=>{var e;return null==(e=c.value)?void 0:e.focus()},le=()=>{const t=c.value;"textarea"===e.type&&e.autosize&&t&&function(e,t){const n=a();e.style.height="auto";let i=e.scrollHeight;if(r(t)){const{maxHeight:e,minHeight:a}=t;void 0!==e&&(i=Math.min(i,e)),void 0!==a&&(i=Math.max(i,a))}i&&(e.style.height=`${i}px`,l(n))}(t,e.autosize)},re=e=>{u.focused=!0,i("focus",e),S(le),L("readonly")&&te()},ne=e=>{u.focused=!1,Z(T(),"onBlur"),i("blur",e),L("readonly")||(Y("onBlur"),S(le),j())},ie=e=>i("clickInput",e),oe=e=>i("clickLeftIcon",e),se=e=>i("clickRightIcon",e),ue=h((()=>"boolean"==typeof e.error?e.error:!(!f||!f.props.showError||"failed"!==u.status)||void 0)),ce=h((()=>{const e=L("labelWidth"),t=L("labelAlign");if(e&&"top"!==t)return{width:y(e)}})),de=t=>{13===t.keyCode&&(f&&f.props.submitOnEnter||"textarea"===e.type||A(t),"search"===e.type&&te()),i("keypress",t)},ge=()=>e.id||`${s}-input`,fe=()=>{const t=K("control",[L("inputAlign"),{error:ue.value,custom:!!o.input,"min-height":"textarea"===e.type&&!e.autosize}]);if(o.input)return I("div",{class:t,onClick:ie},[o.input()]);const a={id:ge(),ref:c,name:e.name,rows:void 0!==e.rows?+e.rows:void 0,class:t,disabled:L("disabled"),readonly:L("readonly"),autofocus:e.autofocus,placeholder:e.placeholder,autocomplete:e.autocomplete,autocapitalize:e.autocapitalize,autocorrect:e.autocorrect,enterkeyhint:e.enterkeyhint,spellcheck:e.spellcheck,"aria-labelledby":e.label?`${s}-label`:void 0,onBlur:ne,onFocus:re,onInput:ee,onClick:ie,onChange:D,onKeypress:de,onCompositionend:D,onCompositionstart:q};return"textarea"===e.type?I("textarea",a,null):I("input",E("number"===(l=e.type)?{type:"text",inputmode:"decimal"}:"digit"===l?{type:"tel",inputmode:"numeric"}:{type:l},a),null);var l},pe=()=>{const t=o["right-icon"];if(e.rightIcon||t)return I("div",{class:K("right-icon"),onClick:se},[t?t():I(H,{name:e.rightIcon,classPrefix:e.iconPrefix},null)])},me=()=>{if(e.showWordLimit&&e.maxlength){const t=O(T());return I("div",{class:K("word-limit")},[I("span",{class:K("word-num")},[t]),z("/"),e.maxlength])}},ve=()=>{if(f&&!1===f.props.showErrorMessage)return;const t=e.errorMessage||u.validateMessage;if(t){const e=o["error-message"],a=L("errorMessageAlign");return I("div",{class:K("error-message",a)},[e?e({message:t}):t])}},he=()=>[I("div",{class:K("body")},[fe(),G.value&&I(H,{ref:d,name:e.clearIcon,class:K("clear")},null),pe(),o.button&&I("div",{class:K("button")},[o.button()])]),me(),ve()];return $({blur:te,focus:ae,validate:U,formValue:N,resetValidation:X,getValidationStatus:()=>u.status}),b(x,{customValue:g,resetValidation:X,validateWithTrigger:Y}),k((()=>e.modelValue),(()=>{Z(T()),X(),Y("onChange"),S(le)})),C((()=>{Z(T(),e.formatTrigger),S(le)})),w("touchstart",(e=>{A(e),i("update:modelValue",""),i("clear",e)}),{target:h((()=>{var e;return null==(e=d.value)?void 0:e.$el}))}),()=>{const t=L("disabled"),a=L("labelAlign"),l=(()=>{const t=o["left-icon"];if(e.leftIcon||t)return I("div",{class:K("left-icon"),onClick:oe},[t?t():I(H,{name:e.leftIcon,classPrefix:e.iconPrefix},null)])})();return I(P,{size:e.size,class:K({error:ue.value,disabled:t,[`label-${a}`]:a}),center:e.center,border:e.border,isLink:e.isLink,clickable:e.clickable,titleStyle:ce.value,valueClass:K("value"),titleClass:[K("label",[a,{required:e.required}]),e.labelClass],arrowDirection:e.arrowDirection},{icon:l&&"top"!==a?()=>l:null,title:()=>{const t=(()=>{const t=L("labelWidth"),a=L("labelAlign"),l=L("colon")?":":"";return o.label?[o.label(),l]:e.label?I("label",{id:`${s}-label`,for:o.input?void 0:ge(),onClick:e=>{A(e),ae()},style:"top"===a&&t?{width:y(t)}:void 0},[e.label+l]):void 0})();return"top"===a?[l,t].filter(Boolean):t||[]},value:he,extra:o.extra})}}});e("F",T(X))}}}));
