import{d as F,x as L,i as k,R as Y,n as Z,c as d,e as o,ai as f,f as e,F as j,I as J,o as n,b as u,g as b,t as m,y as _,p as O,h as G,j as B,s as oo,v as eo,r as T,w as E}from"./index-5ee6b2fa.js";import{D as A,_ as H,T as q,S as to,B as so,L as no}from"./scenes-4d631c1e.js";import{I as K,_ as V,N as ao}from"./_plugin-vue_export-helper-a2c4d23b.js";import{p as co}from"./project-efbc1a4b.js";import{f as lo}from"./utils-64f0fd18.js";import{I as io}from"./index-7dddaeba.js";import{a as ro,S as _o}from"./index-e7df9d00.js";import"./index-6cabca22.js";import"./use-route-d0228638.js";import"./index-f26ecc53.js";import"./use-id-28ca1a2a.js";import"./index-5786f0c1.js";import"./index-9f85b7f2.js";import"./index-a68753f1.js";import"./request-0c3efa69.js";const P=y=>(O("data-v-a2b1c7bc"),y=y(),G(),y),uo={class:"inventory"},mo={class:"table"},po={class:"header"},ho={class:"top"},yo=["onClick"],vo={key:0},fo=["src"],wo={key:0},go={key:0,class:"bbox"},$o=P(()=>o("div",{class:"bname"}," 主要信息： ",-1)),ko={class:"vhtml"},xo={key:1,class:"bbox"},bo=P(()=>o("div",{class:"bname"}," 备注说明： ",-1)),So={class:"vhtml"},Co=F({__name:"inventory",props:{columns:{}},setup(y){const I=y,{columns:D}=L(I),i=c=>{c.on=!c.on},x=D.value.map(()=>k(null)),S=c=>w=>{x[c].value=w},t=Y(()=>{const c=x.map(s=>{var v,C,W,N,M;if(s.value){const z=((v=s.value.querySelector(".col1"))==null?void 0:v.clientWidth)||0,Q=((C=s.value.querySelector(".col2"))==null?void 0:C.clientWidth)||0,R=((W=s.value.querySelector(".col3"))==null?void 0:W.clientWidth)||0,U=((N=s.value.querySelector(".col4"))==null?void 0:N.clientWidth)||0,X=((M=s.value.querySelector(".col5"))==null?void 0:M.clientWidth)||0;return[z,Q,R,U,X]}return[0,0]}),w=Math.max(...c.map(([s])=>s)),g=Math.max(...c.map(([,s])=>s)),a=Math.max(...c.map(([,,s])=>s)),$=Math.max(...c.map(([,,,s])=>s)),r=Math.max(...c.map(([,,,,s])=>s)),h=w+g+a+$+r+3;return[w,g,a,$,r,h]}),l=k(!1);return Z(()=>{l.value=!0}),(c,w)=>{const g=K;return n(),d("div",uo,[o("ul",mo,[o("li",po,[o("div",ho,[o("div",{ref:"col1",style:f({width:e(l)?`${e(t)[0]/100}rem`:"auto"})}," 产品类别 ",4),o("div",{ref:"col2",style:f({width:e(l)?`${e(t)[1]/100}rem`:"auto"})}," 品牌 ",4),o("div",{ref:"col3",style:f({width:e(l)?`${e(t)[2]/100}rem`:"auto"})}," 缩略图 ",4),o("div",{ref:"col4",style:f({width:e(l)?`${e(t)[3]/100}rem`:"auto"})}," 售价/单位 ",4),o("div",{ref:"col5",style:f({width:e(l)?`${e(t)[4]/100}rem`:"auto"})}," 数量 ",4)])]),(n(!0),d(j,null,J(e(D),(a,$)=>(n(),d("li",{key:$,ref_for:!0,ref:"columnDivs",class:"body"},[o("div",{ref_for:!0,ref:S($),class:"top",onClick:r=>i(a)},[o("div",{class:"col1",style:f({width:e(l)?`${e(t)[0]/100}rem`:"auto"})},[u(g,{class:"icon",name:a.on?"arrow-up":"arrow-down",size:"0.08rem",color:"#293644"},null,8,["name"]),b(" "+m(a.name),1)],4),o("div",{class:"col2",style:f({width:e(l)?`${e(t)[1]/100}rem`:"auto"})},[a.product.length?(n(),d("span",vo,m(a.product[0].brand),1)):_("",!0)],4),o("div",{class:"col3",style:f({width:e(l)?`${e(t)[2]/100}rem`:"auto"})},[a.product.length?(n(),d("img",{key:0,class:"shopImg",src:a.product[0].img},null,8,fo)):_("",!0)],4),o("div",{class:"col4",style:f({width:e(l)?`${e(t)[3]/100}rem`:"auto"})},[a.product.length?(n(),d("span",wo," ¥"+m(a.product[0].price/100)+"/"+m(a.product[0].unit),1)):_("",!0)],4),o("div",{class:"col5",style:f({width:e(l)?`${e(t)[4]/100}rem`:"auto"})},m(a.num),5)],8,yo),a.on?(n(),d("div",{key:0,class:"bottom",style:f({width:e(l)?`${e(t)[5]/100}rem`:"100%"})},[a.product.length?(n(),d("div",go,[$o,o("div",ko,m(a.product[0].extra),1)])):_("",!0),a.product.length?(n(),d("div",xo,[bo,o("div",So,m(a.product[0].remark),1)])):_("",!0)],4)):_("",!0)]))),128))])])}}});const Mo=V(Co,[["__scopeId","data-v-a2b1c7bc"]]),p=y=>(O("data-v-3dfc9436"),y=y(),G(),y),Io={class:"money"},Do=p(()=>o("span",null,"¥",-1)),Bo={key:0,class:"bottom"},Wo=p(()=>o("div",null,[o("span",null,"主要信息：包含设备、运输费用、不含税")],-1)),No=p(()=>o("div",null,[o("span",null,"备注说明：所有产品均为原厂正品，智能家居设备支持互联互通、远程控制及场景自动化")],-1)),zo=[Wo,No],Eo={class:"money"},qo={class:"cost"},Fo={class:"rightBox"},Vo={class:"titlar"},To=p(()=>o("span",null,"¥",-1)),Ao=p(()=>o("img",{src:H},null,-1)),Lo=[Ao],jo={key:0,class:"bottom"},Jo=p(()=>o("div",null,[o("span",null,"主要信息：设备总金额 x 20%")],-1)),Oo=p(()=>o("div",null,[o("span",null,"备注说明：包含安装所需的辅材、人工、app配置、设备配网、场景调试费用")],-1)),Go=[Jo,Oo],Ho={class:"money"},Ko={class:"cost"},Po={class:"rightBox"},Qo={class:"titlar"},Ro=p(()=>o("span",null,"¥",-1)),Uo=p(()=>o("img",{src:H},null,-1)),Xo=[Uo],Yo={key:0,class:"bottom"},Zo=p(()=>o("div",null,[o("span",null,"主要信息：面积 x 50元/平方")],-1)),oe=p(()=>o("div",null,[o("span",null,"备注说明：根据CAD图纸，提供灯光场景设计，输出灯具点位、选型等图纸清单")],-1)),ee=[Zo,oe],te={class:"money"},se={style:{color:"#4775EB"}},ne=p(()=>o("span",null,"¥",-1)),ae={key:0,class:"bottom"},ce=p(()=>o("div",null,[o("span",null,"主要信息：含设备、运输、安装、调试")],-1)),le=p(()=>o("div",null,[o("span",null,"备注说明：定金50%，主材安装阶段设备进场前支付45%，配网调试当天支付5%。不含税")],-1)),ie=[ce,le],de=F({__name:"money",props:{money:{},edit:{}},emits:["click"],setup(y,{emit:I}){const D=y,{money:i,edit:x}=L(D),S=()=>{i.value.all_money=i.value.money+i.value.de_money+i.value.design_money,I("click",i.value)},t=k([!1,!1,!1,!1]),l=h=>{t.value[h]=!t.value[h]},c=k(),w=()=>{c.value.display(!0)},g=h=>{i.value.de_money=Number(h),S()},a=k(),$=()=>{a.value.display(!0)},r=h=>{i.value.design_money=Number(h),S()};return(h,s)=>{const v=K;return n(),d("div",null,[o("div",Io,[o("div",{class:"cost",onClick:s[0]||(s[0]=C=>l(0))},[o("div",null,[u(v,{name:e(t)[0]?"arrow-up":"arrow-down",size:"0.12rem",color:"#273545"},null,8,["name"]),b(" 智能家居设备总计金额 ")]),o("div",null,[Do,b(m(e(i).money.toFixed(2)),1)])]),e(t)[0]?(n(),d("div",Bo,zo)):_("",!0)]),o("div",Eo,[o("div",qo,[o("div",{onClick:s[1]||(s[1]=C=>l(1))},[u(v,{name:e(t)[1]?"arrow-up":"arrow-down",size:"0.12rem",color:"#273545"},null,8,["name"]),b(" 设备安装、配网调试费 ")]),o("div",Fo,[o("div",Vo,[To,b(m(e(i).de_money.toFixed(2)),1)]),e(x)?_("",!0):(n(),d("div",{key:0,class:"showEdit",onClick:w},Lo))])]),e(t)[1]?(n(),d("div",jo,Go)):_("",!0)]),o("div",Ho,[o("div",Ko,[o("div",{onClick:s[2]||(s[2]=C=>l(2))},[u(v,{name:e(t)[2]?"arrow-up":"arrow-down",size:"0.12rem",color:"#273545"},null,8,["name"]),b(" 智能灯光标准设计 ")]),o("div",Po,[o("div",Qo,[Ro,b(m(e(i).design_money.toFixed(2)),1)]),e(x)?_("",!0):(n(),d("div",{key:0,class:"showEdit",onClick:$},Xo))])]),e(t)[2]?(n(),d("div",Yo,ee)):_("",!0)]),o("div",te,[o("div",{class:"cost",onClick:s[3]||(s[3]=C=>l(3))},[o("div",null,[u(v,{name:e(t)[3]?"arrow-up":"arrow-down",size:"0.12rem",color:"#273545"},null,8,["name"]),b(" 总金额 ")]),o("div",se,[ne,b(m(e(i).all_money.toFixed(2)),1)])]),e(t)[3]?(n(),d("div",ae,ie)):_("",!0)]),e(i)?(n(),B(A,{key:0,ref_key:"childMoneya",ref:c,money:e(i).de_money,type:"de_money",onDoSthMoney:g},null,8,["money"])):_("",!0),e(i)?(n(),B(A,{key:1,ref_key:"childMoneyb",ref:a,money:e(i).design_money,type:"design_money",onDoSthMoney:r},null,8,["money"])):_("",!0)])}}});const re=V(de,[["__scopeId","data-v-3dfc9436"]]),_e={class:"box"},ue={key:1,class:"main"},me={class:"custom-indicator"},pe={class:"header"},he={class:"header_name"},ye={class:"header_time"},ve={class:"mainBody"},fe={class:"main_box"},we=["src"],ge=F({__name:"index",setup(y){var $;const I=oo(),i=($=eo().query)==null?void 0:$.code;console.log(i);const x=k([]),S=T({loadingShow:!1}),t=k({}),l=k({}),c=T({money:0,de_money:0,design_money:0,all_money:0,cost_money:0,profit:0}),w=k(null),g=k([]);return(async()=>{S.loadingShow=!0;const r=await co.share({code:i});r.code===0&&(x.value=[],x.value.push(r.data.order.img),t.value=r.data.order,c.money=r.data.order.money/100,c.de_money=r.data.order.de_money/100,c.design_money=r.data.order.design_money/100,c.all_money=r.data.order.all_money/100,c.cost_money=r.data.order.cost_money/100,c.profit=r.data.order.profit,w.value={...c},l.value=r.data.style,g.value=JSON.parse(r.data.order.content),g.value.forEach(h=>{h.on=!1,h.product.forEach((s,v)=>{s.pon=v===0})})),S.loadingShow=!1})(),(r,h)=>{const s=ao,v=io,C=_o,W=ro,N=so;return n(),d("div",_e,[u(s,{class:"nav",title:"详情",fixed:"",placeholder:"","safe-area-inset-top":""}),e(S).loadingShow?(n(),B(no,{key:0})):(n(),d("div",ue,[u(W,{class:"banner",autoplay:3e3,"lazy-render":""},{indicator:E(({active:M,total:z})=>[o("div",me,m(M+1)+"/"+m(z),1)]),default:E(()=>[(n(!0),d(j,null,J(e(x),M=>(n(),B(C,{key:M},{default:E(()=>[u(v,{width:"100%",height:"1.99rem",src:M},null,8,["src"])]),_:2},1024))),128))]),_:1}),o("div",pe,[o("div",he,m(e(t).name),1),o("div",ye,[u(v,{width:"0.15rem",height:"0.15rem",src:e(I).getImage("home/time.png")},null,8,["src"]),o("span",null,m(e(lo)(Number(e(t).add_time),"yyyy-MM-dd",1)),1)])]),o("div",ve,[o("div",fe,[u(q,{title:"智能产品清单",font:"0.18rem",padding:"0.27rem 0 0.1rem 0"}),u(Mo,{columns:e(g)},null,8,["columns"]),u(q,{title:"装修风格",tips:`(${e(l).name})`},null,8,["tips"]),e(t)?(n(),d("iframe",{key:0,class:"ifam",src:e(l).url},null,8,we)):_("",!0),u(q,{title:"价格明细"}),u(re,{money:e(w),edit:!0},null,8,["money"])])]),u(N),e(t).ai_content?(n(),B(to,{key:0,name:e(t).ai_content},null,8,["name"])):_("",!0)]))])}}});const Fe=V(ge,[["__scopeId","data-v-ec319926"]]);export{Fe as default};
