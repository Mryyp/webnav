import{z as C,L as E,B as M,d as N,i as f,M as $,r as A,m as R,N as U,b as m,O as F,P as G,Q as Y,E as j,c as P,f as v,j as L,w as V,G as B,o as T,F as z,I as O,p as Q,h as X,e as q}from"./index-5ee6b2fa.js";import{L as J}from"./index-13f22d94.js";import{C as K}from"./index-6cabca22.js";import{E as W}from"./index-81af74fa.js";import{N as Z,_ as ee}from"./_plugin-vue_export-helper-a2c4d23b.js";import{f as te}from"./utils-64f0fd18.js";import{i as ae}from"./index-2a44163e.js";import{u as se}from"./index-5786f0c1.js";import{L as ne}from"./use-id-28ca1a2a.js";import"./use-route-d0228638.js";import"./request-0c3efa69.js";const[oe,x,le]=C("pull-refresh"),I=50,ie=["pulling","loosing","success"],ce={disabled:Boolean,modelValue:Boolean,headHeight:E(I),successText:String,pullingText:String,loosingText:String,loadingText:String,pullDistance:M,successDuration:E(500),animationDuration:E(300)};var ue=N({name:oe,props:ce,emits:["change","refresh","update:modelValue"],setup(a,{emit:_,slots:l}){let o;const n=f(),c=f(),g=$(n),t=A({status:"normal",distance:0,duration:0}),u=se(),k=()=>{if(a.headHeight!==I)return{height:`${a.headHeight}px`}},i=()=>t.status!=="loading"&&t.status!=="success"&&!a.disabled,h=e=>{const s=+(a.pullDistance||a.headHeight);return e>s&&(e<s*2?e=s+(e-s)/2:e=s*1.5+(e-s*2)/4),Math.round(e)},r=(e,s)=>{const p=+(a.pullDistance||a.headHeight);t.distance=e,s?t.status="loading":e===0?t.status="normal":e<p?t.status="pulling":t.status="loosing",_("change",{status:t.status,distance:e})},S=()=>{const{status:e}=t;return e==="normal"?"":a[`${e}Text`]||le(e)},D=()=>{const{status:e,distance:s}=t;if(l[e])return l[e]({distance:s});const p=[];return ie.includes(e)&&p.push(m("div",{class:x("text")},[S()])),e==="loading"&&p.push(m(ne,{class:x("loading")},{default:S})),p},b=()=>{t.status="success",setTimeout(()=>{r(0)},+a.successDuration)},y=e=>{o=G(g.value)===0,o&&(t.duration=0,u.start(e))},d=e=>{i()&&y(e)},H=e=>{if(i()){o||y(e);const{deltaY:s}=u;u.move(e),o&&s.value>=0&&u.isVertical()&&(Y(e),r(h(s.value)))}},w=()=>{o&&u.deltaY.value&&i()&&(t.duration=+a.animationDuration,t.status==="loosing"?(r(+a.headHeight,!0),_("update:modelValue",!0),F(()=>_("refresh"))):r(0))};return R(()=>a.modelValue,e=>{t.duration=+a.animationDuration,e?r(+a.headHeight,!0):l.success||a.successText?b():r(0,!1)}),U("touchmove",H,{target:c}),()=>{var e;const s={transitionDuration:`${t.duration}ms`,transform:t.distance?`translate3d(0,${t.distance}px, 0)`:""};return m("div",{ref:n,class:x()},[m("div",{ref:c,class:x("track"),style:s,onTouchstartPassive:d,onTouchend:w,onTouchcancel:w},[m("div",{class:x("head"),style:k()},[D()]),(e=l.default)==null?void 0:e.call(l)])])}}});const re=j(ue);const de=a=>(Q("data-v-93654580"),a=a(),X(),a),fe={class:"box"},me=de(()=>q("span",{class:"cell_right"},"+1",-1)),he=N({__name:"index",setup(a){const _=()=>history.back(),l=f(!1),o=f(0),n=f([]),c=f(!1),g=f(!1),t=f(!1),u=async()=>{t.value?(n.value=[],o.value=1,t.value=!1):o.value=o.value+1;const i=await ae.invite({page:o.value});i.code===0&&(n.value.length===0?n.value=i.data.list:n.value=n.value.concat(i.data.list),n.value.length?l.value=!1:l.value=!0),c.value=!1,n.value.length>=i.data.count&&(g.value=!0)},k=()=>{g.value=!1,c.value=!0,u()};return(i,h)=>{const r=Z,S=W,D=K,b=J,y=re;return T(),P("div",fe,[m(r,{class:"nav",title:"邀请记录",fixed:"",placeholder:"","safe-area-inset-top":"","left-arrow":"",onClickLeft:_}),v(l)?(T(),L(S,{key:0,description:"暂无邀请"})):(T(),L(y,{key:1,modelValue:v(t),"onUpdate:modelValue":h[1]||(h[1]=d=>B(t)?t.value=d:null),onRefresh:k},{default:V(()=>[m(b,{loading:v(c),"onUpdate:loading":h[0]||(h[0]=d=>B(c)?c.value=d:null),finished:v(g),"finished-text":"没有更多了",onLoad:u},{default:V(()=>[(T(!0),P(z,null,O(v(n),(d,H)=>(T(),L(D,{key:H,class:"cell",center:"",title:d.mobile,label:v(te)(Number(d.add_time),"yyyy-MM-dd hh:mm:ss",1)},{"right-icon":V(()=>[me]),_:2},1032,["title","label"]))),128))]),_:1},8,["loading","finished"])]),_:1},8,["modelValue"]))])}}});const He=ee(he,[["__scopeId","data-v-93654580"]]);export{He as default};
