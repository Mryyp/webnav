import{z as J,d as Y,a1 as ta,m as H,A as ke,b as o,B as ie,C as ce,E as re,a2 as Q,a3 as te,Y as N,i as T,R as M,D as pe,a4 as Le,a5 as W,W as de,r as se,N as na,Q as _e,V as G,a6 as la,U as Ae,a7 as Be,L as ne,X as le,n as sa,a8 as ia,a9 as ca,O as ra,aa as da,ab as Ye,ac as ua,$ as Xe,S as ma,ad as va,ae as $e,af as Re,ag as fa,s as we,x as ga,o as D,c as L,w as P,e as x,f as r,G as Oe,g as E,F as ye,I as xe,ah as je,t as Ee,y as ge,p as Ce,h as Ve,j as Ne,u as ha}from"./index-5ee6b2fa.js";import{L as A,P as pa}from"./index-e189e7bf.js";import{S as _a}from"./index-33a09d76.js";import"./index-6cabca22.js";import{F as ba}from"./index-f26ecc53.js";import{I as K,T as ze,L as ka,H as wa,_ as he,N as ya}from"./_plugin-vue_export-helper-a2c4d23b.js";import{a as Pe,u as xa,P as Ze,c as Me}from"./index-5786f0c1.js";import{I as ue}from"./index-7dddaeba.js";import{i as Ca}from"./index-2a44163e.js";import{S as Va,a as Pa}from"./index-e7df9d00.js";import{L as Se}from"./use-id-28ca1a2a.js";import{m as Sa,u as Ia,c as qe,d as $a,b as Ra,s as za}from"./request-0c3efa69.js";import{p as Ue}from"./project-efbc1a4b.js";import"./use-route-d0228638.js";const[He,Ua]=J("radio-group"),Da={shape:String,disabled:Boolean,iconSize:ie,direction:String,modelValue:ce,checkedColor:String},Ge=Symbol(He);var Fa=Y({name:He,props:Da,emits:["change","update:modelValue"],setup(e,{emit:l,slots:c}){const{linkChildren:a}=ta(Ge),n=t=>l("update:modelValue",t);return H(()=>e.modelValue,t=>l("change",t)),a({props:e,updateValue:n}),ke(()=>e.modelValue),()=>{var t;return o("div",{class:Ua([e.direction]),role:"radiogroup"},[(t=c.default)==null?void 0:t.call(c)])}}});const Ta=re(Fa),Ie={name:ce,disabled:Boolean,iconSize:ie,modelValue:ce,checkedColor:String,labelPosition:String,labelDisabled:Boolean};var We=Y({props:Q({},Ie,{bem:te(Function),role:String,shape:String,parent:Object,checked:Boolean,bindGroup:N}),emits:["click","toggle"],setup(e,{emit:l,slots:c}){const a=T(),n=i=>{if(e.parent&&e.bindGroup)return e.parent.props[i]},t=M(()=>{if(e.parent&&e.bindGroup){const i=n("disabled")||e.disabled;if(e.role==="checkbox"){const _=n("modelValue").length,b=n("max"),U=b&&_>=+b;return i||U&&!e.checked}return i}return e.disabled}),g=M(()=>n("direction")),h=M(()=>{const i=e.checkedColor||n("checkedColor");if(i&&e.checked&&!t.value)return{borderColor:i,backgroundColor:i}}),w=M(()=>e.shape||n("shape")||"round"),k=i=>{const{target:_}=i,b=a.value,U=b===_||(b==null?void 0:b.contains(_));!t.value&&(U||!e.labelDisabled)&&l("toggle"),l("click",i)},u=()=>{var i,_;const{bem:b,checked:U}=e,z=e.iconSize||n("iconSize");return o("div",{ref:a,class:b("icon",[w.value,{disabled:t.value,checked:U}]),style:w.value!=="dot"?{fontSize:pe(z)}:{width:pe(z),height:pe(z),borderColor:(i=h.value)==null?void 0:i.borderColor}},[c.icon?c.icon({checked:U,disabled:t.value}):w.value!=="dot"?o(K,{name:"success",style:h.value},null):o("div",{class:b("icon--dot__icon"),style:{backgroundColor:(_=h.value)==null?void 0:_.backgroundColor}},null)])},d=()=>{if(c.default)return o("span",{class:e.bem("label",[e.labelPosition,{disabled:t.value}])},[c.default()])};return()=>{const i=e.labelPosition==="left"?[d(),u()]:[u(),d()];return o("div",{role:e.role,class:e.bem([{disabled:t.value,"label-disabled":e.labelDisabled},g.value]),tabindex:t.value?void 0:0,"aria-checked":e.checked,onClick:k},[i])}}});const La=Q({},Ie,{shape:String}),[Aa,Ba]=J("radio");var Ya=Y({name:Aa,props:La,emits:["update:modelValue"],setup(e,{emit:l,slots:c}){const{parent:a}=Le(Ge),n=()=>(a?a.props.modelValue:e.modelValue)===e.name,t=()=>{a?a.updateValue(e.name):l("update:modelValue",e.name)};return()=>o(We,de({bem:Ba,role:"radio",parent:a,checked:n(),onToggle:t},e),W(c,["default","icon"]))}});const Xa=re(Ya),[Oa,st]=J("checkbox-group"),ja=Symbol(Oa),[Ea,Na]=J("checkbox"),Za=Q({},Ie,{shape:String,bindGroup:N});var Ma=Y({name:Ea,props:Za,emits:["change","update:modelValue"],setup(e,{emit:l,slots:c}){const{parent:a}=Le(ja),n=h=>{const{name:w}=e,{max:k,modelValue:u}=a.props,d=u.slice();if(h)!(k&&d.length>=+k)&&!d.includes(w)&&(d.push(w),e.bindGroup&&a.updateValue(d));else{const i=d.indexOf(w);i!==-1&&(d.splice(i,1),e.bindGroup&&a.updateValue(d))}},t=M(()=>a&&e.bindGroup?a.props.modelValue.indexOf(e.name)!==-1:!!e.modelValue),g=(h=!t.value)=>{a&&e.bindGroup?n(h):l("update:modelValue",h)};return H(()=>e.modelValue,h=>l("change",h)),Pe({toggle:g,props:e,checked:t}),ke(()=>e.modelValue),()=>o(We,de({bem:Na,role:"checkbox",parent:a,checked:t.value,onToggle:g},e),W(c,["default","icon"]))}});const Ke=re(Ma),De=e=>Math.sqrt((e[0].clientX-e[1].clientX)**2+(e[0].clientY-e[1].clientY)**2),qa=e=>({x:(e[0].clientX+e[1].clientX)/2,y:(e[0].clientY+e[1].clientY)/2}),be=J("image-preview")[1],Fe=2.6;var Ha=Y({props:{src:String,show:Boolean,active:Number,minZoom:te(ie),maxZoom:te(ie),rootWidth:te(Number),rootHeight:te(Number),disableZoom:Boolean},emits:["scale","close","longPress"],setup(e,{emit:l,slots:c}){const a=se({scale:1,moveX:0,moveY:0,moving:!1,zooming:!1,initializing:!1,imageRatio:0}),n=xa(),t=T(),g=T(),h=T(!1),w=T(!1);let k=0;const u=M(()=>{const{scale:m,moveX:C,moveY:V,moving:F,zooming:j,initializing:ae}=a,ve={transitionDuration:j||F||ae?"0s":".3s"};return(m!==1||w.value)&&(ve.transform=`matrix(${m}, 0, 0, ${m}, ${C}, ${V})`),ve}),d=M(()=>{if(a.imageRatio){const{rootWidth:m,rootHeight:C}=e,V=h.value?C/a.imageRatio:m;return Math.max(0,(a.scale*V-m)/2)}return 0}),i=M(()=>{if(a.imageRatio){const{rootWidth:m,rootHeight:C}=e,V=h.value?C:m*a.imageRatio;return Math.max(0,(a.scale*V-C)/2)}return 0}),_=(m,C)=>{var V;if(m=G(m,+e.minZoom,+e.maxZoom+1),m!==a.scale){const F=m/a.scale;if(a.scale=m,C){const j=Ae((V=t.value)==null?void 0:V.$el),ae={x:j.width*.5,y:j.height*.5},ve=a.moveX-(C.x-j.left-ae.x)*(F-1),oa=a.moveY-(C.y-j.top-ae.y)*(F-1);a.moveX=G(ve,-d.value,d.value),a.moveY=G(oa,-i.value,i.value)}else a.moveX=0,a.moveY=w.value?k:0;l("scale",{scale:m,index:e.active})}},b=()=>{_(1)},U=()=>{const m=a.scale>1?1:2;_(m,m===2||w.value?{x:n.startX.value,y:n.startY.value}:void 0)};let z,X,f,v,$,q,s,p,S=!1;const I=m=>{const{touches:C}=m;if(z=C.length,z===2&&e.disableZoom)return;const{offsetX:V}=n;n.start(m),X=a.moveX,f=a.moveY,p=Date.now(),S=!1,a.moving=z===1&&(a.scale!==1||w.value),a.zooming=z===2&&!V.value,a.zooming&&(v=a.scale,$=De(C))},B=m=>{const{touches:C}=m;if(n.move(m),a.moving){const{deltaX:V,deltaY:F}=n,j=V.value+X,ae=F.value+f;if((j>d.value||j<-d.value)&&!S&&n.isHorizontal()){a.moving=!1;return}S=!0,_e(m,!0),a.moveX=G(j,-d.value,d.value),a.moveY=G(ae,-i.value,i.value)}if(a.zooming&&(_e(m,!0),C.length===2)){const V=De(C),F=v*V/$;q=qa(C),_(F,q)}},O=()=>{if(z>1)return;const{offsetX:m,offsetY:C}=n,V=Date.now()-p,F=250;m.value<ze&&C.value<ze&&(V<F?s?(clearTimeout(s),s=null,U()):s=setTimeout(()=>{l("close"),s=null},F):V>ka&&l("longPress"))},ee=m=>{let C=!1;if((a.moving||a.zooming)&&(C=!0,a.moving&&X===a.moveX&&f===a.moveY&&(C=!1),!m.touches.length)){a.zooming&&(a.moveX=G(a.moveX,-d.value,d.value),a.moveY=G(a.moveY,-i.value,i.value),a.zooming=!1),a.moving=!1,X=0,f=0,v=1,a.scale<1&&b();const V=+e.maxZoom;a.scale>V&&_(V,q)}_e(m,C),O(),n.reset()},y=()=>{const{rootWidth:m,rootHeight:C}=e,V=C/m,{imageRatio:F}=a;h.value=a.imageRatio>V&&F<Fe,w.value=a.imageRatio>V&&F>=Fe,w.value&&(k=(F*m-C)/2,a.moveY=k,a.initializing=!0,la(()=>{a.initializing=!1})),b()},me=m=>{const{naturalWidth:C,naturalHeight:V}=m.target;a.imageRatio=V/C,y()};return H(()=>e.active,b),H(()=>e.show,m=>{m||b()}),H(()=>[e.rootWidth,e.rootHeight],y),na("touchmove",B,{target:M(()=>{var m;return(m=g.value)==null?void 0:m.$el})}),()=>{const m={loading:()=>o(Se,{type:"spinner"},null)};return o(Va,{ref:g,class:be("swipe-item"),onTouchstartPassive:I,onTouchend:ee,onTouchcancel:ee},{default:()=>[c.image?o("div",{class:be("image-wrap")},[c.image({src:e.src})]):o(ue,{ref:t,src:e.src,fit:"contain",class:be("image",{vertical:h.value}),style:u.value,onLoad:me},m)]})}}});const[Ga,oe]=J("image-preview"),Wa=["show","teleport","transition","overlayStyle","closeOnPopstate"],Ka={show:Boolean,loop:N,images:Be(),minZoom:ne(1/3),maxZoom:ne(3),overlay:N,closeable:Boolean,showIndex:N,className:ce,closeIcon:le("clear"),transition:String,beforeClose:Function,overlayClass:ce,overlayStyle:Object,swipeDuration:ne(300),startPosition:ne(0),showIndicators:Boolean,closeOnPopstate:N,closeIconPosition:le("top-right"),teleport:[String,Object]};var Qe=Y({name:Ga,props:Ka,emits:["scale","close","closed","change","longPress","update:show"],setup(e,{emit:l,slots:c}){const a=T(),n=se({active:0,rootWidth:0,rootHeight:0,disableZoom:!1}),t=()=>{if(a.value){const f=Ae(a.value.$el);n.rootWidth=f.width,n.rootHeight=f.height,a.value.resize()}},g=f=>l("scale",f),h=f=>l("update:show",f),w=()=>{Me(e.beforeClose,{args:[n.active],done:()=>h(!1)})},k=f=>{f!==n.active&&(n.active=f,l("change",f))},u=()=>{if(e.showIndex)return o("div",{class:oe("index")},[c.index?c.index({index:n.active}):`${n.active+1} / ${e.images.length}`])},d=()=>{if(c.cover)return o("div",{class:oe("cover")},[c.cover()])},i=()=>{n.disableZoom=!0},_=()=>{n.disableZoom=!1},b=()=>o(Pa,{ref:a,lazyRender:!0,loop:e.loop,class:oe("swipe"),duration:e.swipeDuration,initialSwipe:e.startPosition,showIndicators:e.showIndicators,indicatorColor:"white",onChange:k,onDragEnd:_,onDragStart:i},{default:()=>[e.images.map((f,v)=>o(Ha,{src:f,show:e.show,active:n.active,maxZoom:e.maxZoom,minZoom:e.minZoom,rootWidth:n.rootWidth,rootHeight:n.rootHeight,disableZoom:n.disableZoom,onScale:g,onClose:w,onLongPress:()=>l("longPress",{index:v})},{image:c.image}))]}),U=()=>{if(e.closeable)return o(K,{role:"button",name:e.closeIcon,class:[oe("close-icon",e.closeIconPosition),wa],onClick:w},null)},z=()=>l("closed"),X=(f,v)=>{var $;return($=a.value)==null?void 0:$.swipeTo(f,v)};return Pe({swipeTo:X}),sa(t),H([ia,ca],t),H(()=>e.startPosition,f=>k(+f)),H(()=>e.show,f=>{const{images:v,startPosition:$}=e;f?(k(+$),ra(()=>{t(),X(+$,{immediate:!0})})):l("close",{index:n.active,url:v[n.active]})}),()=>o(Ze,de({class:[oe(),e.className],overlayClass:[oe("overlay"),e.overlayClass],onClosed:z,"onUpdate:show":h},W(e,Wa)),{default:()=>[U(),b(),u(),d()]})}});let fe;const Qa={loop:!0,images:[],maxZoom:3,minZoom:1/3,onScale:void 0,onClose:void 0,onChange:void 0,teleport:"body",className:"",showIndex:!0,closeable:!1,closeIcon:"clear",transition:void 0,beforeClose:void 0,overlayStyle:void 0,overlayClass:void 0,startPosition:0,swipeDuration:300,showIndicators:!1,closeOnPopstate:!0,closeIconPosition:"top-right"};function Ja(){({instance:fe}=Sa({setup(){const{state:e,toggle:l}=Ia(),c=()=>{e.images=[]};return()=>o(Qe,de(e,{onClosed:c,"onUpdate:show":l}),null)}}))}const eo=(e,l=0)=>{if(da)return fe||Ja(),e=Array.isArray(e)?{images:e,startPosition:l}:e,fe.open(Q({},Qa,e)),fe};re(Qe);const[ao,R,oo]=J("uploader");function Te(e,l){return new Promise(c=>{if(l==="file"){c();return}const a=new FileReader;a.onload=n=>{c(n.target.result)},l==="dataUrl"?a.readAsDataURL(e):l==="text"&&a.readAsText(e)})}function Je(e,l){return Ye(e).some(c=>c.file?ua(l)?l(c.file):c.file.size>+l:!1)}function to(e,l){const c=[],a=[];return e.forEach(n=>{Je(n,l)?a.push(n):c.push(n)}),{valid:c,invalid:a}}const no=/\.(jpeg|jpg|gif|png|svg|webp|jfif|bmp|dpg|avif)/i,lo=e=>no.test(e);function ea(e){return e.isImage?!0:e.file&&e.file.type?e.file.type.indexOf("image")===0:e.url?lo(e.url):typeof e.content=="string"?e.content.indexOf("data:image")===0:!1}var so=Y({props:{name:ie,item:te(Object),index:Number,imageFit:String,lazyLoad:Boolean,deletable:Boolean,reupload:Boolean,previewSize:[Number,String,Array],beforeDelete:Function},emits:["delete","preview","reupload"],setup(e,{emit:l,slots:c}){const a=()=>{const{status:u,message:d}=e.item;if(u==="uploading"||u==="failed"){const i=u==="failed"?o(K,{name:"close",class:R("mask-icon")},null):o(Se,{class:R("loading")},null),_=ma(d)&&d!=="";return o("div",{class:R("mask")},[i,_&&o("div",{class:R("mask-message")},[d])])}},n=u=>{const{name:d,item:i,index:_,beforeDelete:b}=e;u.stopPropagation(),Me(b,{args:[i,{name:d,index:_}],done:()=>l("delete")})},t=()=>l("preview"),g=()=>l("reupload"),h=()=>{if(e.deletable&&e.item.status!=="uploading"){const u=c["preview-delete"];return o("div",{role:"button",class:R("preview-delete",{shadow:!u}),tabindex:0,"aria-label":oo("delete"),onClick:n},[u?u():o(K,{name:"cross",class:R("preview-delete-icon")},null)])}},w=()=>{if(c["preview-cover"]){const{index:u,item:d}=e;return o("div",{class:R("preview-cover")},[c["preview-cover"](Q({index:u},d))])}},k=()=>{const{item:u,lazyLoad:d,imageFit:i,previewSize:_,reupload:b}=e;return ea(u)?o(ue,{fit:i,src:u.objectUrl||u.content||u.url,class:R("preview-image"),width:Array.isArray(_)?_[0]:_,height:Array.isArray(_)?_[1]:_,lazyLoad:d,onClick:b?g:t},{default:w}):o("div",{class:R("file"),style:Xe(e.previewSize)},[o(K,{class:R("file-icon"),name:"description"},null),o("div",{class:[R("file-name"),"van-ellipsis"]},[u.file?u.file.name:u.url]),w()])};return()=>o("div",{class:R("preview")},[k(),a(),h()])}});const io={name:ne(""),accept:le("image/*"),capture:String,multiple:Boolean,disabled:Boolean,readonly:Boolean,lazyLoad:Boolean,maxCount:ne(1/0),imageFit:le("cover"),resultType:le("dataUrl"),uploadIcon:le("photograph"),uploadText:String,deletable:N,reupload:Boolean,afterRead:Function,showUpload:N,modelValue:Be(),beforeRead:Function,beforeDelete:Function,previewSize:[Number,String,Array],previewImage:N,previewOptions:Object,previewFullImage:N,maxSize:{type:[Number,String,Function],default:1/0}};var co=Y({name:ao,props:io,emits:["delete","oversize","clickUpload","closePreview","clickPreview","clickReupload","update:modelValue"],setup(e,{emit:l,slots:c}){const a=T(),n=[],t=T(-1),g=(s=e.modelValue.length)=>({name:e.name,index:s}),h=()=>{a.value&&(a.value.value="")},w=s=>{if(h(),Je(s,e.maxSize))if(Array.isArray(s)){const p=to(s,e.maxSize);if(s=p.valid,l("oversize",p.invalid,g()),!s.length)return}else{l("oversize",s,g());return}if(s=se(s),t.value>-1){const p=[...e.modelValue];p.splice(t.value,1,s),l("update:modelValue",p),t.value=-1}else l("update:modelValue",[...e.modelValue,...Ye(s)]);e.afterRead&&e.afterRead(s,g())},k=s=>{const{maxCount:p,modelValue:S,resultType:I}=e;if(Array.isArray(s)){const B=+p-S.length;s.length>B&&(s=s.slice(0,B)),Promise.all(s.map(O=>Te(O,I))).then(O=>{const ee=s.map((y,me)=>{const m={file:y,status:"",message:"",objectUrl:URL.createObjectURL(y)};return O[me]&&(m.content=O[me]),m});w(ee)})}else Te(s,I).then(B=>{const O={file:s,status:"",message:"",objectUrl:URL.createObjectURL(s)};B&&(O.content=B),w(O)})},u=s=>{const{files:p}=s.target;if(e.disabled||!p||!p.length)return;const S=p.length===1?p[0]:[].slice.call(p);if(e.beforeRead){const I=e.beforeRead(S,g());if(!I){h();return}if(fa(I)){I.then(B=>{k(B||S)}).catch(h);return}}k(S)};let d;const i=()=>l("closePreview"),_=s=>{if(e.previewFullImage){const p=e.modelValue.filter(ea),S=p.map(I=>(I.objectUrl&&!I.url&&I.status!=="failed"&&(I.url=I.objectUrl,n.push(I.url)),I.url)).filter(Boolean);d=eo(Q({images:S,startPosition:p.indexOf(s),onClose:i},e.previewOptions))}},b=()=>{d&&d.close()},U=(s,p)=>{const S=e.modelValue.slice(0);S.splice(p,1),l("update:modelValue",S),l("delete",s,g(p))},z=s=>{q(),t.value=s},X=(s,p)=>{const S=["imageFit","deletable","reupload","previewSize","beforeDelete"],I=Q(W(e,S),W(s,S,!0));return o(so,de({item:s,index:p,onClick:()=>l(e.reupload?"clickReupload":"clickPreview",s,g(p)),onDelete:()=>U(s,p),onPreview:()=>_(s),onReupload:()=>z(p)},W(e,["name","lazyLoad"]),I),W(c,["preview-cover","preview-delete"]))},f=()=>{if(e.previewImage)return e.modelValue.map(X)},v=s=>l("clickUpload",s),$=()=>{if(e.modelValue.length>=+e.maxCount&&!e.reupload)return;const s=e.modelValue.length>=+e.maxCount&&e.reupload,p=e.readonly?null:o("input",{ref:a,type:"file",class:R("input"),accept:e.accept,capture:e.capture,multiple:e.multiple&&t.value===-1,disabled:e.disabled,onChange:u},null);return c.default?$e(o("div",{class:R("input-wrapper"),onClick:v},[c.default(),p]),[[Re,!s]]):$e(o("div",{class:R("upload",{readonly:e.readonly}),style:Xe(e.previewSize),onClick:v},[o(K,{name:e.uploadIcon,class:R("upload-icon")},null),e.uploadText&&o("span",{class:R("upload-text")},[e.uploadText]),p]),[[Re,e.showUpload&&!s]])},q=()=>{a.value&&!e.disabled&&a.value.click()};return va(()=>{n.forEach(s=>URL.revokeObjectURL(s))}),Pe({chooseFile:q,closeImagePreview:b}),ke(()=>e.modelValue),()=>o("div",{class:R()},[o("div",{class:R("wrapper",{disabled:e.disabled})},[f(),$()])])}});const ro=re(co);const aa=e=>(Ce("data-v-ef1e24a2"),e=e(),Ve(),e),uo=aa(()=>x("div",null,[x("span",{class:"required"},"*"),E("全屋智能需求 ")],-1)),mo=["src"],vo={class:"demand"},fo=["onClick"],go=aa(()=>x("div",{style:{height:"0.06rem"}},null,-1)),ho=["src"],po=Y({__name:"demand",props:{data:{}},emits:["click"],setup(e,{emit:l}){const c=e,a=we(),{data:n}=ga(c),t=T([]),g=T(!1),h=()=>{l("click",t)},w=u=>{const d=n.value.map(i=>i.id);u?t.value=d:t.value=[],h()},k=u=>{t.value.includes(u)?t.value=t.value.filter(d=>d!==u):t.value.push(u),h()};return(u,d)=>{const i=Ke,_=ue;return D(),L("div",null,[o(A,{title:"",border:!1,class:"check"},{default:P(()=>[uo,x("div",null,[o(i,{modelValue:r(g),"onUpdate:modelValue":d[0]||(d[0]=b=>Oe(g)?g.value=b:null),class:"checkbox","label-position":"left",onChange:w},{icon:P(b=>[x("img",{class:"img-icon",src:b.checked?r(a).getImage("home/radioa.png"):r(a).getImage("home/radio.png")},null,8,mo)]),default:P(()=>[E(" 全选 ")]),_:1},8,["modelValue"])])]),_:1}),x("ul",vo,[(D(!0),L(ye,null,xe(r(n),(b,U)=>(D(),L("li",{key:U,class:je(r(t).includes(b.id)?"select":"no"),onClick:z=>k(b.id)},[go,o(_,{class:"img",width:"0.29rem",height:"0.29rem",src:r(a).getImage(`icon/${b.id}.png`)},null,8,["src"]),x("span",null,Ee(b.name),1),r(t).includes(b.id)?(D(),L("img",{key:0,src:r(a).getImage("home/scrd.png")},null,8,ho)):ge("",!0)],10,fo))),128))])])}}});const _o=he(po,[["__scopeId","data-v-ef1e24a2"]]),bo=e=>(Ce("data-v-3ef2f998"),e=e(),Ve(),e),ko=bo(()=>x("div",null," 场景模式介绍（chatgpt） ",-1)),wo=["src"],yo={class:"scenes"},xo=["onClick"],Co=["src"],Vo=Y({__name:"scenes",emits:["click"],setup(e,{emit:l}){const c=we(),a=se(["回家模式","会客模式","就餐模式","观影模式","阅读模式","睡眠模式","起夜模式","起床模式","离家模式","布防模式","空净模式","明亮模式","温馨模式","休闲模式","聚会模式","浪漫模式"]),n=T([]),t=T(!1),g=()=>{l("click",n)},h=k=>{k?n.value=a:n.value=[],g()},w=k=>{n.value.includes(k)?n.value=n.value.filter(u=>u!==k):n.value.push(k),g()};return(k,u)=>{const d=Ke;return D(),L("div",null,[o(A,{title:"",border:!1,class:"check"},{default:P(()=>[ko,x("div",null,[o(d,{modelValue:r(t),"onUpdate:modelValue":u[0]||(u[0]=i=>Oe(t)?t.value=i:null),class:"checkbox","label-position":"left",onChange:h},{icon:P(i=>[x("img",{class:"img-icon",src:i.checked?r(c).getImage("home/radioa.png"):r(c).getImage("home/radio.png")},null,8,wo)]),default:P(()=>[E(" 全选 ")]),_:1},8,["modelValue"])])]),_:1}),x("ul",yo,[(D(!0),L(ye,null,xe(r(a),(i,_)=>(D(),L("li",{key:_,class:je(r(n).includes(i)?"select":"no"),onClick:b=>w(i)},[E(Ee(i)+" ",1),r(n).includes(i)?(D(),L("img",{key:0,src:r(c).getImage("home/scrs.png")},null,8,Co)):ge("",!0)],10,xo))),128))])])}}});const Po=he(Vo,[["__scopeId","data-v-3ef2f998"]]);const So={class:"boxImg"},Io=["onClick"],$o=Y({__name:"upload",props:{size:{}},emits:["click","callParent"],setup(e,{emit:l}){const{size:c}=e,a=T([]),n=()=>{l("click",a.value)},t=async h=>{const w=new FormData;w.append("img",h.file),qe({message:"上传中...",duration:0,forbidClick:!0});const k=await Ca.upload(w);k.code===0&&(a.value.push(k.data),$a(),n())},g=h=>{a.value.splice(h,1),n()};return(h,w)=>{const k=ue,u=K,d=ro;return D(),L("div",So,[(D(!0),L(ye,null,xe(r(a),(i,_)=>(D(),L("div",{key:_,class:"list"},[o(k,{width:"0.9rem",height:"0.9rem",src:i},null,8,["src"]),x("div",{class:"icon",onClick:b=>g(_)},[o(u,{name:"cross",color:"#ffffff"})],8,Io)]))),128)),r(a).length<c?(D(),Ne(d,{key:0,class:"list","after-read":t,"max-count":6,"preview-size":"0.9rem"})):ge("",!0)])}}});const Ro=he($o,[["__scopeId","data-v-0e674bd0"]]),Z=e=>(Ce("data-v-434da295"),e=e(),Ve(),e),zo={class:"box"},Uo={class:"main"},Do={class:"main-m"},Fo=Z(()=>x("span",{class:"required"},"*",-1)),To=Z(()=>x("span",null,"层",-1)),Lo=Z(()=>x("span",null,"室",-1)),Ao=Z(()=>x("span",null,"厅",-1)),Bo=Z(()=>x("span",null,"厨",-1)),Yo=Z(()=>x("span",null,"卫",-1)),Xo=Z(()=>x("span",null,"阳台",-1)),Oo=Z(()=>x("span",{style:{color:"#273545"}},"平方",-1)),jo=Z(()=>x("span",{class:"required"},"*",-1)),Eo=Z(()=>x("span",{style:{color:"#273545"}},"%",-1)),No={key:1,class:"button"},Zo=Y({__name:"index",setup(e){const l=we(),c=ha(),a=()=>history.back(),n=()=>{c.push({path:"/home"})},t=se({name:"",style:"",img:"",a:1,b:1,c:1,d:1,e:1,f:1,area:"",type:null,money:"",p_ids:"",scenes:""}),g=se({showPicker:!1,demand:[],style:""}),h=T([]),w=({selectedOptions:f})=>{var v,$;t.style=(v=f[0])==null?void 0:v.id,g.style=($=f[0])==null?void 0:$.name,g.showPicker=!1},k={text:"name",value:"id"},u=f=>{t.img=f[0]};(async()=>{const f=await Ue.project();f.code===0&&(h.value=f.data.style,g.demand=f.data.project)})();const i=f=>{t.p_ids=f.value.join(",")},_=f=>{t.scenes=f.value.join(",")},b=[{message:"请输入项目名称",required:!0,key:"name"},{message:"请选择装修风格",required:!0,key:"style"},{message:"请上传户型图",required:!1,key:"img"},{message:"请输入每层建筑面积",required:!0,key:"area"},{message:"请选择采用方案",required:!0,key:"type"},{message:"请选择全屋智能需求",required:!0,key:"p_ids"},{message:"请选择场景模式",required:!1,key:"scenes"}],U=f=>b.some($=>$.required&&!f[$.key]?(za($.message),!0):!1),z=T(!0),X=async()=>{if(U(t))return;qe({message:"生成报价中...",forbidClick:!0,duration:0}),z.value=!1;const f=await Ue.create(t);z.value=!0,f.code===0&&Ra({message:"新建项目成功",forbidClick:!0,onClose:()=>{c.push({path:"/detail",query:{type:1,id:f.data.id}})}})};return(f,v)=>{const $=ue,q=ya,s=ba,p=_a,S=Xa,I=Ta,B=Se,O=pa,ee=Ze;return D(),L("div",zo,[o(q,{class:"nav",title:"新建报价项目",fixed:"",placeholder:"","safe-area-inset-top":"","left-arrow":"",onClickLeft:a},{right:P(()=>[o($,{width:"0.26rem",height:"0.26rem",src:r(l).getImage("home/me.png"),onClick:n},null,8,["src"])]),_:1}),x("div",Uo,[x("div",Do,[o(A,null,{default:P(()=>[o(s,{modelValue:r(t).name,"onUpdate:modelValue":v[0]||(v[0]=y=>r(t).name=y),modelModifiers:{trim:!0},required:"",maxlength:"20",class:"input",type:"text",label:"项目名称",placeholder:"请输入项目名称","input-align":"right"},null,8,["modelValue"])]),_:1}),o(A,null,{default:P(()=>[o(s,{modelValue:r(g).style,"onUpdate:modelValue":v[1]||(v[1]=y=>r(g).style=y),"is-link":"",readonly:"",required:"",name:"picker",class:"input",label:"装修风格",placeholder:"请选择装修风格","input-align":"right",onClick:v[2]||(v[2]=y=>r(g).showPicker=!0)},null,8,["modelValue"])]),_:1}),o(A,{title:"",border:!1},{default:P(()=>[E(" 上传户型图 ")]),_:1}),o(A,{padding:"0 0 0.08rem 0"},{default:P(()=>[o(Ro,{size:1,onClick:u})]),_:1}),o(A,{title:"",border:!1},{default:P(()=>[Fo,E("户型结构 ")]),_:1}),o(A,{class:"stepper"},{default:P(()=>[x("li",null,[o(p,{modelValue:r(t).a,"onUpdate:modelValue":v[3]||(v[3]=y=>r(t).a=y),class:"van-stepper","disable-input":"",min:"1",max:"50"},null,8,["modelValue"]),To]),x("li",null,[o(p,{modelValue:r(t).b,"onUpdate:modelValue":v[4]||(v[4]=y=>r(t).b=y),class:"van-stepper","disable-input":"",min:"1",max:"20"},null,8,["modelValue"]),Lo]),x("li",null,[o(p,{modelValue:r(t).c,"onUpdate:modelValue":v[5]||(v[5]=y=>r(t).c=y),class:"van-stepper","disable-input":"",min:"1",max:"20"},null,8,["modelValue"]),Ao]),x("li",null,[o(p,{modelValue:r(t).d,"onUpdate:modelValue":v[6]||(v[6]=y=>r(t).d=y),class:"van-stepper","disable-input":"",min:"1",max:"20"},null,8,["modelValue"]),Bo]),x("li",null,[o(p,{modelValue:r(t).e,"onUpdate:modelValue":v[7]||(v[7]=y=>r(t).e=y),class:"van-stepper","disable-input":"",min:"1",max:"20"},null,8,["modelValue"]),Yo]),x("li",null,[o(p,{modelValue:r(t).f,"onUpdate:modelValue":v[8]||(v[8]=y=>r(t).f=y),class:"van-stepper","disable-input":"",min:"1",max:"20"},null,8,["modelValue"]),Xo])]),_:1}),o(A,null,{default:P(()=>[o(s,{modelValue:r(t).area,"onUpdate:modelValue":v[9]||(v[9]=y=>r(t).area=y),modelModifiers:{trim:!0},required:"",maxlength:"20",class:"input",type:"number",label:"每层建筑面积约",placeholder:"请输入","input-align":"right"},{button:P(()=>[Oo]),_:1},8,["modelValue"])]),_:1}),o(A,{title:"",border:!1},{default:P(()=>[jo,E("采用方案 ")]),_:1}),o(A,{padding:"0 0 0.2rem 0"},{default:P(()=>[x("div",null,[o(I,{modelValue:r(t).type,"onUpdate:modelValue":v[10]||(v[10]=y=>r(t).type=y),class:"radio",direction:"horizontal",shape:"dot","checked-color":"#436AE9"},{default:P(()=>[o(S,{name:"1"},{default:P(()=>[E("无线方案")]),_:1}),o(S,{name:"2"},{default:P(()=>[E("PLC有线无线融合方案")]),_:1})]),_:1},8,["modelValue"])])]),_:1}),o(A,null,{default:P(()=>[o(s,{modelValue:r(l).info_data.profit,"onUpdate:modelValue":v[11]||(v[11]=y=>r(l).info_data.profit=y),modelModifiers:{trim:!0},readonly:"",required:"",maxlength:"20",class:"input",type:"number",label:"报价整体毛利设置",placeholder:"请输入","input-align":"right"},{button:P(()=>[Eo]),_:1},8,["modelValue"])]),_:1}),o(A,{padding:"0 0 0.2rem 0"},{default:P(()=>[r(g).demand.length?(D(),Ne(_o,{key:0,data:r(g).demand,onClick:i},null,8,["data"])):ge("",!0)]),_:1}),o(Po,{onClick:_})])]),r(z)?(D(),L("div",{key:0,class:"button",onClick:X}," 保存 ")):(D(),L("div",No,[E(" 生成报价中"),o(B,{color:"#FFFFFF",size:"0.2rem",style:{"margin-left":"0.1rem"}})])),o(ee,{show:r(g).showPicker,"onUpdate:show":v[13]||(v[13]=y=>r(g).showPicker=y),position:"bottom"},{default:P(()=>[o(O,{columns:r(h),"columns-field-names":k,onConfirm:w,onCancel:v[12]||(v[12]=y=>r(g).showPicker=!1)},null,8,["columns"])]),_:1},8,["show"])])}}});const it=he(Zo,[["__scopeId","data-v-434da295"]]);export{it as default};
