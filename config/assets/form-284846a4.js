import{d as N,s as S,v as U,u as R,r as y,c as q,b as r,e as i,t as g,f as e,w as v,o as D,g as T,l as F}from"./index-5ee6b2fa.js";import"./index-6cabca22.js";import{F as P}from"./index-f26ecc53.js";import{N as $,_ as z}from"./_plugin-vue_export-helper-a2c4d23b.js";import{i as A}from"./utils-64f0fd18.js";import{S as E,l as w}from"./login-9c7d3e67.js";import{B as L}from"./index-a68753f1.js";import{s as n}from"./request-0c3efa69.js";import"./use-route-d0228638.js";import"./use-id-28ca1a2a.js";import"./index-5786f0c1.js";import"./index-2a44163e.js";const j={class:"box"},G={class:"main"},H={class:"title"},J={class:"label-box"},K={class:"label-box"},O={class:"label-box"},Q={class:"label-box"},W={class:"label-box"},X=N({__name:"form",setup(Y){var f,b;const p=S(),c=U(),u=R(),m=(f=c.query)==null?void 0:f.name,h=(b=c.query)==null?void 0:b.invite_code,o=y({mobile:"",code:"",password:"",passwordb:"",invite_code:h}),s=y({type_one:!1,type_two:!1,eye_no:"login/eye-no.png",eye_yes:"login/eye-yes.png"}),V=()=>history.back(),x=()=>o.mobile?A(o.mobile)?o.code?!o.password||!o.passwordb?(n("请输入密码"),!1):o.password!==o.passwordb?(n("输入密码不一致"),!1):!0:(n("请输入验证码"),!1):(n("手机号格式错误"),!1):(n("请输入手机号"),!1),k=async l=>{const t=await w.regist(l);t.code===0&&(n({message:"注册成功",forbidClick:!0,onClose:()=>{u.push({path:"/home"})}}),F.set("quotation_token",t.data.token))},C=async l=>{(await w.resetPassword(l)).code===0&&n({message:"修改成功",forbidClick:!0,onClose:()=>{u.push({path:"/"})}})},I=()=>{if(!x())return!1;const l={mobile:o.mobile,code:o.code,password:o.password,invite_code:o.invite_code};m==="register"?k(l):C(l)},_=l=>{l?s.type_two=!s.type_two:s.type_one=!s.type_one};return(l,t)=>{const B=$,d=P,M=L;return D(),q("div",j,[r(B,{class:"nav",title:"在线报价工具",fixed:"",placeholder:"","safe-area-inset-top":"","left-arrow":"",onClickLeft:V}),i("div",G,[i("div",H,g(e(m)==="register"?"欢迎注册":"忘记密码"),1),i("div",J,[r(d,{modelValue:e(o).mobile,"onUpdate:modelValue":t[0]||(t[0]=a=>e(o).mobile=a),modelModifiers:{trim:!0},maxlength:"11",class:"input",type:"tel",label:"手机号",placeholder:"请输入手机号",clearable:""},null,8,["modelValue"])]),i("div",K,[r(d,{modelValue:e(o).code,"onUpdate:modelValue":t[1]||(t[1]=a=>e(o).code=a),modelModifiers:{trim:!0},maxlength:"4",class:"input",type:"number",label:"验证码",placeholder:"请输入验证码"},{button:v(()=>[r(E,{mobile:e(o).mobile,type:e(m)==="register"?3:2},null,8,["mobile","type"])]),_:1},8,["modelValue"])]),i("div",O,[r(d,{modelValue:e(o).password,"onUpdate:modelValue":t[2]||(t[2]=a=>e(o).password=a),modelModifiers:{trim:!0},class:"input",label:"密码",placeholder:"请输入密码",type:e(s).type_one?"text":"password","right-icon":e(s).type_one?e(p).getImage(e(s).eye_yes):e(p).getImage(e(s).eye_no),onClickRightIcon:t[3]||(t[3]=a=>_(0))},null,8,["modelValue","type","right-icon"])]),i("div",Q,[r(d,{modelValue:e(o).passwordb,"onUpdate:modelValue":t[4]||(t[4]=a=>e(o).passwordb=a),modelModifiers:{trim:!0},class:"input",label:"确认密码",placeholder:"请输入密码",type:e(s).type_two?"text":"password","right-icon":e(s).type_two?e(p).getImage(e(s).eye_yes):e(p).getImage(e(s).eye_no),onClickRightIcon:t[5]||(t[5]=a=>_(1))},null,8,["modelValue","type","right-icon"])]),i("div",W,[r(d,{modelValue:e(o).invite_code,"onUpdate:modelValue":t[6]||(t[6]=a=>e(o).invite_code=a),modelModifiers:{trim:!0},maxlength:"20",class:"input",type:"tel",label:"邀请码",placeholder:"邀请码（可选）",clearable:""},null,8,["modelValue"])]),r(M,{class:"button",round:"",type:"primary",size:"large",onClick:I},{default:v(()=>[T(g(e(m)==="register"?"注册":"确定"),1)]),_:1})])])}}});const me=z(X,[["__scopeId","data-v-499785e6"]]);export{me as default};
