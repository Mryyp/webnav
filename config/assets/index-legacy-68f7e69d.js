System.register(["./_plugin-vue_export-helper-legacy-81237f8a.js","./index-legacy-a99c9020.js"],(function(e,o){"use strict";var r,a,l,n,i,t,s,u,c,d,v,g,f,h,p,m,y,b,w,z,S;return{setters:[e=>{r=e.I},e=>{a=e.z,l=e.d,n=e.i,i=e.aD,t=e.R,s=e.D,u=e.S,c=e.m,d=e.aa,v=e.ad,g=e.n,f=e.O,h=e.b,p=e.B,m=e.Y,y=e.X,b=e.ae,w=e.aJ,z=e.W,S=e.E}],execute:function(){const[o,x]=a("image"),L={src:String,alt:String,fit:String,position:String,round:Boolean,block:Boolean,width:p,height:p,radius:p,lazyLoad:Boolean,iconSize:p,showError:m,errorIcon:y("photo-fail"),iconPrefix:String,showLoading:m,loadingIcon:y("photo")};var I=l({name:o,props:L,emits:["load","error"],setup(e,{emit:o,slots:a}){const l=n(!1),p=n(!0),m=n(),{$Lazyload:y}=i().proxy,S=t((()=>{const o={width:s(e.width),height:s(e.height)};return u(e.radius)&&(o.overflow="hidden",o.borderRadius=s(e.radius)),o}));c((()=>e.src),(()=>{l.value=!1,p.value=!0}));const L=e=>{p.value&&(p.value=!1,o("load",e))},I=()=>{const e=new Event("load");Object.defineProperty(e,"target",{value:m.value,enumerable:!0}),L(e)},j=e=>{l.value=!0,p.value=!1,o("error",e)},E=(o,a,l)=>l?l():h(r,{name:o,size:e.iconSize,class:a,classPrefix:e.iconPrefix},null),P=()=>{if(l.value||!e.src)return;const o={alt:e.alt,class:x("img"),style:{objectFit:e.fit,objectPosition:e.position}};return e.lazyLoad?b(h("img",z({ref:m},o),null),[[w("lazy"),e.src]]):h("img",z({ref:m,src:e.src,onLoad:L,onError:j},o),null)},$=({el:e})=>{const o=()=>{e===m.value&&p.value&&I()};m.value?o():f(o)},B=({el:e})=>{e!==m.value||l.value||j()};return y&&d&&(y.$on("loaded",$),y.$on("error",B),v((()=>{y.$off("loaded",$),y.$off("error",B)}))),g((()=>{f((()=>{var o;(null==(o=m.value)?void 0:o.complete)&&!e.lazyLoad&&I()}))})),()=>{var o;return h("div",{class:x({round:e.round,block:e.block}),style:S.value},[P(),p.value&&e.showLoading?h("div",{class:x("loading")},[E(e.loadingIcon,x("loading-icon"),a.loading)]):l.value&&e.showError?h("div",{class:x("error")},[E(e.errorIcon,x("error-icon"),a.error)]):void 0,null==(o=a.default)?void 0:o.call(a)])}}});e("I",S(I))}}}));
